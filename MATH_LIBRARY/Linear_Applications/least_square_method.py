import numpy as np
import matplotlib.pyplot as plt

"""
expression(matrix equation):
X*K = y
be careful for its order
"""


def Least_square_plot(x1, x2, y=None, model=plt):
    if x1 == [] or x2 == []:
        return 0
    x_mtr = []
    for i in range(len(x1)):
        x_mtr.append([1, x1[i], x1[i] ** 2, x2[i], x2[i] ** 2, x1[i] * x2[i]])
    x_mtr = np.array(x_mtr)
    y_mtr = np.array(y).T

    a = np.dot(x_mtr.T, x_mtr)
    b = np.dot(x_mtr.T, y_mtr)
    k = np.dot(np.linalg.inv(a), b)

    # y_pred = list(np.dot(x_mtr, k))
    print(k)
    # model.figure(figsize=(12, 12))
    # model.plot(x, y_pred, 'r-', linewidth=2, label='predicted data')
    # model.scatter(x, y, c='#ff7f0e', linewidths=1, label='original data')
    # model.legend()
    # model.grid()
    # model.show()

    return k

# x = [2.84, 2.86, 2.86, 2.88, 2.88, 2.9, 2.9, 2.9, 2.92, 2.92, 2.92, 2.94, 2.94, 2.96, 2.96, 2.98, 2.98, 2.98, 3.0, 3.0,
#      3.0, 3.02, 3.02, 3.02, 3.04, 3.04, 3.06, 3.06, 3.08, 3.08, 3.1, 3.1, 3.1, 3.12, 3.12, 3.12, 3.14, 3.14, 3.14, 3.16,
#      3.16, 3.16, 3.18, 3.18, 3.18, 3.2, 3.2, 3.2, 3.22, 3.22, 3.22, 3.24, 3.24, 3.24, 3.26, 3.26, 3.26, 3.28, 3.28,
#      3.28, 3.3, 3.3, 3.3, 3.32, 3.32, 3.32, 3.34, 3.34, 3.36, 3.36, 3.38, 3.38, 3.38, 3.4, 3.4, 3.4, 3.42, 3.42, 3.44,
#      3.44, 3.44, 3.46, 3.46, 3.46, 3.48, 3.48, 3.5, 3.5, 3.5, 3.52, 3.52, 3.54, 3.54, 3.54, 3.56, 3.56, 3.56, 3.58,
#      3.58, 3.6, 3.6, 3.6, 3.62, 3.62, 3.62, 3.64, 3.64, 3.66, 3.66, 3.68, 3.68, 3.68, 3.7, 3.7, 3.7, 3.72, 3.72, 3.72,
#      3.74, 3.74, 3.74, 3.76, 3.76, 3.76, 3.78, 3.78, 3.78, 3.8, 3.8, 3.82, 3.82, 3.84, 3.84, 3.86, 3.86, 3.88, 3.88,
#      3.88, 3.9, 3.9, 3.92, 3.92, 3.94, 3.94, 3.96, 3.96, 3.98, 3.98, 3.98, 4.0, 4.0]
# y = [0.0, 0.04, 0.06, 0.1, 0.12, 0.16, 0.18, 0.2, 0.22, 0.24, 0.26, 0.3, 0.32, 0.36, 0.38, 0.42, 0.44, 0.46, 0.48, 0.5,
#      0.52, 0.54, 0.56, 0.58, 0.62, 0.64, 0.68, 0.7000000000000001, 0.74, 0.76, 0.8, 0.8200000000000001, 0.84, 0.86,
#      0.88, 0.9, 0.92, 0.9400000000000001, 0.96, 0.98, 1.0, 1.02, 1.04, 1.06, 1.08, 1.1, 1.12, 1.1400000000000001, 1.16,
#      1.18, 1.2, 1.22, 1.24, 1.26, 1.28, 1.3, 1.32, 1.34, 1.36, 1.3800000000000001, 1.4000000000000001, 1.42, 1.44, 1.46,
#      1.48, 1.5, 1.52, 1.54, 1.58, 1.6, 1.62, 1.6400000000000001, 1.6600000000000001, 1.68, 1.7, 1.72, 1.74, 1.76, 1.78,
#      1.8, 1.82, 1.84, 1.86, 1.8800000000000001, 1.9000000000000001, 1.92, 1.94, 1.96, 1.98, 2.0, 2.02, 2.04, 2.06, 2.08,
#      2.08, 2.1, 2.12, 2.14, 2.16, 2.18, 2.2, 2.22, 2.22, 2.24, 2.2600000000000002, 2.2800000000000002,
#      2.3000000000000003, 2.32, 2.34, 2.36, 2.38, 2.4, 2.4, 2.42, 2.44, 2.44, 2.46, 2.48, 2.48, 2.5, 2.52, 2.52, 2.54,
#      2.56, 2.56, 2.58, 2.6, 2.6, 2.62, 2.64, 2.66, 2.68, 2.7, 2.72, 2.74, 2.74, 2.7600000000000002, 2.7800000000000002,
#      2.7800000000000002, 2.8000000000000003, 2.82, 2.84, 2.84, 2.86, 2.88, 2.9, 2.9, 2.92, 2.94, 2.94, 2.96]
# print(Least_square_plot(x, y))
